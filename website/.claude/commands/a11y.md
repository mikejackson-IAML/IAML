# Accessibility Audit Command

Perform accessibility checks using Playwright's accessibility snapshot feature.

## Objective

Audit pages for WCAG 2.1 AA compliance:
- ARIA landmarks
- Heading hierarchy (H1-H6)
- Image alt text
- Form labels and error messaging
- Focus indicators
- Keyboard navigation

## Configuration

- **Base URL**: http://localhost:3000 (vercel dev)
- **Standard**: WCAG 2.1 AA (minimum)

---

## Execution Steps

### Phase 1: Define Test Pages

Test these pages (different interaction patterns):
1. `/` (Homepage - mixed content, carousels)
2. `/register.html` (Complex forms - critical for a11y)
3. `/featured-programs` (Card grid, interactive elements)
4. `/about-us` (Content structure, headings)

### Phase 2: For Each Page

Using Playwright MCP accessibility features:

1. **Navigate** to page with hard reload
2. **Get accessibility snapshot** (Playwright's accessibility tree)
3. **Analyze the following**:

#### Landmarks Check
- Check for `<main>` element (required)
- Check for `<nav>` element (required for navigation)
- Check for `<header>` element
- Check for `<footer>` element
- Verify ARIA roles where HTML5 elements aren't used

#### Heading Hierarchy Check
- Only one `<h1>` per page (critical)
- No skipped levels (h1 -> h3 without h2)
- Headings are meaningful (not empty)
- Proper nesting structure

#### Image Accessibility Check
- All `<img>` elements have `alt` attribute
- Decorative images have `alt=""`
- Informative images have descriptive alt text
- Background images with text have alternatives

#### Form Accessibility Check
- All inputs have associated `<label>` elements
- Labels are properly connected (for/id or wrapping)
- Required fields are indicated (aria-required or required)
- Error messages are associated with inputs
- Form has accessible name

#### Interactive Elements Check
- Buttons have accessible names
- Links have descriptive text (not "click here")
- Custom controls have proper ARIA roles
- Focus order is logical

#### Focus Indicators Check
- Interactive elements have visible focus styles
- Focus is not hidden or removed

### Phase 3: Report Generation

```
# Accessibility Report
**Date**: [YYYY-MM-DD HH:MM:SS]
**Standard**: WCAG 2.1 AA
**Pages Tested**: 4

---

## Summary
| Page | Landmarks | Headings | Images | Forms | Focus | Overall |
|------|-----------|----------|--------|-------|-------|---------|
| / | PASS | WARN | WARN | PASS | PASS | WARN |
| /register.html | PASS | PASS | PASS | PASS | PASS | PASS |
| /featured-programs | PASS | PASS | WARN | N/A | PASS | WARN |
| /about-us | PASS | PASS | PASS | N/A | PASS | PASS |

**Issues Found**: 3
**Status**: WARN

---

## Page: / (Homepage)

### Landmarks
- [PASS] `<header>` present
- [PASS] `<main>` present
- [PASS] `<nav>` present
- [PASS] `<footer>` present

### Headings
- [PASS] Single H1: "Master Workplace Law with Industry-Leading Faculty"
- [WARN] H2 followed by H4 (skipped H3)
  - Location: Benefits section
  - Selector: `.benefits-section h4`
  - Issue: Heading level skipped from H2 to H4
  - Fix: Change H4 to H3 or adjust hierarchy

### Images
- Total images: 15
- [PASS] With alt: 14
- [FAIL] Missing alt: 1
  - Image: `/images/decorative-pattern.png`
  - Selector: `img.hero-bg`
  - Fix: Add `alt=""` if decorative, or descriptive alt if meaningful

### Forms
- [PASS] Newsletter form has proper labels

### Focus
- [PASS] All interactive elements have visible focus

### Screenshot
- qa/screenshots/a11y/home-a11y-[ts].png

---

## Page: /register.html

### Landmarks
- [PASS] All landmarks present

### Headings
- [PASS] Single H1: "Register for Your Program"
- [PASS] Proper heading hierarchy

### Images
- [PASS] All images have appropriate alt text

### Forms
- [PASS] All 12 form fields have labels
- [PASS] Required fields marked with aria-required
- [PASS] Error messages linked to inputs
- [PASS] Form sections have fieldset/legend

### Focus
- [PASS] Tab order is logical
- [PASS] Focus trapped in modal when open

---

## Issues Summary

### Critical (Must Fix)
None

### High Priority (Fix Soon)
1. **Missing alt text** - /index.html
   - Selector: `img.hero-bg`
   - Fix: Add `alt=""` for decorative or descriptive alt for informative

### Medium Priority (Should Fix)
1. **Heading hierarchy** - /index.html
   - Selector: `.benefits-section h4`
   - Fix: Adjust heading levels to avoid skipping

### Low Priority (Consider Fixing)
None

---

## Recommendations

1. Add alt="" to decorative images that don't convey meaning
2. Review heading structure in benefits section
3. Consider adding skip link if not present
```

---

## Output

Save screenshots to: `qa/screenshots/a11y/`
Save report to: `qa/reports/a11y-YYYYMMDD-HHMMSS.md`

Display summary:
```
Accessibility Audit Complete
============================
Pages: 4 tested
Issues Found: 3

Critical: 0
High: 1
Medium: 1
Low: 0

Status: WARN

Full report: qa/reports/a11y-20251218-143022.md
```

---

## Guardrails

1. **Same-origin only**: Only test localhost:3000 pages
2. **Hard reload**: Clear cache before testing
3. **No HTML dumps**: Report selectors and specific issues only
4. **Actionable output**: Include fix suggestions for each issue

---

## Success Criteria

- **PASS**: No critical or high-priority issues
- **WARN**: Medium or low-priority issues only
- **FAIL**: Any critical or high-priority issues found
