<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Meta Tags -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="IAML Program Schedule - View upcoming workplace law training programs. Multiple formats including virtual, in-person, and on-demand options.">
  <meta name="keywords" content="employment law training, HR training schedule, IAML programs, workplace law seminars">
  <meta name="author" content="Institute for Applied Management & Law">

  <!-- Open Graph / Social Media -->
  <meta property="og:title" content="IAML Program Schedule - Upcoming Training Programs">
  <meta property="og:description" content="View upcoming workplace law training programs. Multiple formats available.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://iaml.com/program-schedule">

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">

  <title>Program Schedule - IAML</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Source+Serif+Pro:wght@400;600;700&family=Lato:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- CDN & External Service Preconnects -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://storage.googleapis.com">
  <link rel="preconnect" href="https://www.googletagmanager.com">
  <link rel="preconnect" href="https://api.airtable.com">

  <!-- Splide CSS (for carousels if needed) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css">

  <!-- Main CSS -->
  <link rel="stylesheet" href="../css/main.css">

  <!-- Google Analytics (Replace with your GA4 ID) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX');
  </script>

  <!-- Page-Specific Styles -->
  <style>
    /* ===== HERO SECTION STYLES ===== */
    /* Inner content container - flexbox centering handled by .hero-section from main.css */
    .program-schedule-hero {
      text-align: center;
      max-width: 1000px;
      width: 100%;
      margin: 0 auto;
      padding: 0 20px;
      z-index: 2;
    }

    .program-schedule-hero .trusted-text {
      color: #3b82f6;
      font-size: 15px;
      font-weight: 600;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      margin-top: 80px; /* Match homepage eyebrow spacing */
      margin-bottom: 32px; /* Match homepage */
    }

    .program-schedule-hero .main-headline {
      font-family: 'Playfair Display', serif;
      font-size: 3.5rem;
      font-weight: 400;
      color: white;
      line-height: 1.1;
      margin-bottom: 24px; /* Match homepage: var(--space-lg) */
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
    }

    .program-schedule-hero .description {
      font-family: 'Lato', sans-serif;
      font-size: 1.25rem;
      color: rgba(255, 255, 255, 0.9);
      line-height: 1.6;
      margin-bottom: 48px; /* Match homepage: var(--space-2xl) */
      max-width: 850px;
      margin-left: auto;
      margin-right: auto;
    }

    .program-schedule-hero .button-container {
      display: flex;
      gap: var(--space-md); /* Match homepage: 16px */
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
    }

    /* Hero Responsive */
    @media (max-width: 768px) {
      .program-schedule-hero .main-headline {
        font-size: 2.5rem;
      }

      .program-schedule-hero .description {
        font-size: 1.1rem;
      }

      .program-schedule-hero .button-container {
        flex-direction: column;
        gap: 20px;
      }

      .program-schedule-hero .btn {
        width: 100%;
        max-width: 300px;
      }
    }

    @media (max-width: 480px) {
      .program-schedule-hero .main-headline {
        font-size: 2rem;
      }

      .program-schedule-hero .description {
        font-size: 1rem;
      }
    }

    /* ===== CALENDAR WIDGET STYLES ===== */
    /* Scoped Font Setting */
    .iaml-calendar-widget * {
      font-family: 'Lato', sans-serif;
    }

    :root {
      /* Brand Colors */
      --iaml-red: #e93d3d;
      --iaml-blue: #28528c;
      --iaml-dark: #2d376e;

      /* Calendar Theme */
      --bg-primary: transparent;
      --bg-secondary: rgba(248, 249, 250, 0.8);
      --bg-accent: rgba(241, 243, 244, 0.8);

      /* Text Colors */
      --text-primary: #2c3e50;
      --text-secondary: #5a6c7d;
      --text-light: #8492a6;
      --text-white: #ffffff;

      /* Interactive */
      --border-color: #e1e5e9;
      --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.08);
      --shadow-md: 0 4px 15px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.15);

      /* Transitions */
      --transition-fast: 150ms ease;
      --transition-base: 300ms ease;

      /* Spacing */
      --spacing-xs: 0.5rem;
      --spacing-sm: 1rem;
      --spacing-md: 1.5rem;
      --spacing-lg: 2rem;
      --spacing-xl: 3rem;
      --spacing-xxl: 4rem;
    }

    /* Main Container */
    .seminar-calendar-section {
      background: transparent;
      padding: var(--spacing-xxl) 0;
      min-height: 100vh;
    }

    .calendar-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 var(--spacing-lg);
    }

    /* Control Bar */
    .calendar-controls {
      border-radius: 12px;
      margin-bottom: var(--spacing-xl);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: nowrap;
      gap: var(--spacing-sm);
      min-width: 0;
      overflow: hidden;
    }

    .filter-section {
      display: flex;
      gap: var(--spacing-sm);
      align-items: center;
      flex: 1;
      min-width: 0;
      overflow: hidden;
    }

    .filter-controls {
      display: flex;
      gap: 6px;
      align-items: center;
      flex: 1;
      min-width: 0;
      overflow: hidden;
    }

    /* View Switcher - Glass Morphism Style */
    .view-switcher {
      display: flex;
      gap: 4px;
      background: rgba(255, 255, 255, 0.1);
      font-size: 0.85rem;
      min-width: 60px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgb(237 237 238 / 35%) !important;
      border-radius: 10px;
      flex: 0 0 auto;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .filter-actions {
      flex: 0 0 auto;
      margin-left: var(--spacing-xs);
    }

    .filter-group select {
      padding: 8px 30px 8px 12px;
      font-size: 0.85rem;
      min-width: 140px;
      max-width: 180px;
    }

    /* Production layout fixes */
    .iaml-calendar-widget .calendar-controls {
      flex-wrap: nowrap !important;
      min-height: 60px;
      align-items: center !important;
    }

    .iaml-calendar-widget .filter-section {
      flex: 1 1 auto;
      min-width: 0;
      overflow: hidden;
    }

    .iaml-calendar-widget .filter-controls {
      flex-wrap: nowrap !important;
      overflow: hidden;
      gap: 4px !important;
    }

    .iaml-calendar-widget .filter-group {
      flex: 0 1 auto;
      min-width: 120px;
      max-width: 160px;
    }

    .iaml-calendar-widget .filter-actions {
      flex: 0 0 auto;
      margin-left: 8px;
    }

    .iaml-calendar-widget .view-switcher {
      flex: 0 0 auto;
      margin-left: 8px;
    }

    .iaml-calendar-widget .filter-group select {
      padding: 6px 24px 6px 10px !important;
      font-size: 0.8rem !important;
      min-width: 120px !important;
      max-width: 160px !important;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .iaml-calendar-widget .filter-group select:hover {
      background: rgba(255, 255, 255, 0.8) !important;
      border-color: rgba(255, 255, 255, 0.9) !important;
      color: #28528c !important;
    }

    .iaml-calendar-widget .btn-clear {
      padding: 6px 10px !important;
      font-size: 0.8rem !important;
      min-width: 50px !important;
      white-space: nowrap;
    }

    .iaml-calendar-widget .view-btn {
      padding: 6px 10px !important;
      font-size: 0.8rem !important;
      min-width: 50px !important;
    }

    /* Responsive layout for tighter spaces */
    @media (max-width: 900px) {
      .calendar-controls {
        flex-direction: column;
        gap: var(--spacing-sm);
        align-items: stretch;
      }

      .filter-section {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .view-switcher {
        align-self: flex-end;
      }
    }

    .view-btn {
      padding: 8px 14px;
      border: none;
      background: transparent;
      color: #fff !important;
      font-family: 'Lato', sans-serif;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      border-radius: 8px;
      transition: all var(--transition-base);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      white-space: nowrap;
    }

    .view-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      color: rgba(255, 255, 255, 0.95);
      transform: translateY(-1px);
    }

    .view-btn.active {
      background: rgb(237 237 238) !important;
      color: #28528c !important;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
      transform: translateY(-2px);
      font-weight: 700;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }

    /* Filter System */
    .filter-group {
      flex: 0 0 auto;
      min-width: auto;
      max-width: none;
    }

    .filter-select {
      width: auto;
      min-width: 0;
      overflow: hidden;
      padding: 8px 28px 8px 12px;
      white-space: nowrap;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      background: #ffffff;
      font-size: 0.85rem;
      min-width: 60px;
      color: #28528c;
      max-width: fit-content;
      transition: all var(--transition-fast);
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .iaml-calendar-widget .filter-select:hover {
      background: #f8fafc;
      border-color: #28528c;
      color: #28528c;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .iaml-calendar-widget .filter-select:focus {
      outline: none;
      background: #ffffff;
      border-color: #28528c;
      color: #28528c;
      box-shadow: 0 0 0 3px rgba(40, 82, 140, 0.2);
    }

    /* Dropdown options styling */
    .filter-select option {
      background: #28528c;
      color: white;
      padding: 8px;
    }

    /* Filter Actions */
    .btn-clear {
      padding: 6px 12px;
      border: 1px solid #d1d5db;
      background: #ffffff;
      font-size: 0.85rem;
      min-width: 60px;
      color: #28528c;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition-fast);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      white-space: nowrap;
      flex-shrink: 0;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .btn-clear:hover {
      background: #f8fafc;
      border-color: #28528c;
      color: #28528c;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    /* Loading State */
    .loading-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: var(--spacing-xxl);
      text-align: center;
    }

    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 3px solid var(--bg-secondary);
      border-top: 3px solid var(--iaml-blue);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: var(--spacing-md);
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .loading-text {
      color: var(--text-secondary);
      font-family: 'Lato', sans-serif;
      margin: 0;
    }

    /* Error State */
    .error-container {
      background: #fef2f2;
      border: 1px solid #fecaca;
      color: #dc2626;
      padding: var(--spacing-md);
      border-radius: 8px;
      text-align: center;
      margin-bottom: var(--spacing-lg);
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: var(--spacing-xxl);
      color: var(--text-secondary);
    }

    /* Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .modal-content {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: var(--spacing-xl);
      max-width: 800px;
      width: 90%;
      max-height: 85vh;
      overflow-y: auto;
      position: relative;
      box-shadow: var(--shadow-lg);
    }

    .modal-close {
      position: absolute;
      top: var(--spacing-md);
      right: var(--spacing-md);
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-light);
      padding: 4px;
      border-radius: 4px;
      transition: all var(--transition-fast);
    }

    .modal-close:hover {
      background: var(--bg-secondary);
      color: var(--text-primary);
    }

    .modal-content h2 {
      margin: 0;
      color: var(--text-primary);
      font-family: 'Playfair Display', serif;
    }

    .modal-program-description {
      font-size: 1rem;
      line-height: 1.6;
      color: var(--text-secondary);
      margin: 0.5rem 0 var(--spacing-md) 0;
      padding: var(--spacing-sm) 0;
      border-bottom: 1px solid var(--border-color);
    }

    .modal-content img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: var(--spacing-md);
    }

    .modal-location {
      font-size: 1.125rem;
      color: var(--text-secondary);
      margin-bottom: 0.1rem;
    }

    .modal-dates {
      font-size: 1rem;
      color: var(--iaml-blue);
      font-weight: 600;
      margin-bottom: var(--spacing-md);
    }

    .modal-venue {
      font-size: 0.95rem;
      color: var(--text-secondary);
      margin-bottom: var(--spacing-md);
    }

    .modal-description {
      line-height: 1.6;
      color: var(--text-primary);
      margin-bottom: var(--spacing-lg);
    }

    .modal-actions {
      display: flex;
      gap: var(--spacing-sm);
      justify-content: flex-end;
    }

    /* Card View */
    .calendar-display.cards-view {
      display: grid;
      gap: var(--spacing-lg);
      grid-template-columns: repeat(3, 1fr);
    }

    @media (max-width: 1200px) {
      .calendar-display.cards-view {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    .seminar-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: var(--shadow-md);
      transition: all var(--transition-base);
      position: relative;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .seminar-card:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow-lg);
    }

    /* Card Image Section */
    .card-image-container {
      position: relative;
      height: 200px;
      overflow: hidden;
    }

    .card-hero-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform var(--transition-base);
    }

    .seminar-card:hover .card-hero-image {
      transform: scale(1.08);
    }

    /* The Perfect Overlay - Clean & Professional */
    .card-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(180deg,
        rgba(15, 23, 42, 0.15) 0%,
        rgba(30, 41, 59, 0.45) 40%,
        rgba(15, 23, 42, 0.75) 100%
      );
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 30px;
      color: white;
    }

    .overlay-top {
      min-height: 20px;
    }

    .overlay-bottom {
      min-height: 40px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    .overlay-location {
      font-size: 1.125rem;
      font-weight: 600;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      text-transform: uppercase;
    }

    .overlay-date {
      font-size: 0.875rem;
      opacity: 0.95;
      margin-top: 4px;
    }

    /* Card Content */
    .card-content {
      padding: 32px;
      flex: 1;
      display: flex;
      flex-direction: column;
      background: #ffffff;
      position: relative;
    }

    .card-title {
      font-size: 1.2rem;
      font-weight: 500;
      color: #222639;
      line-height: 1.2;
      text-align: center;
      font-family: 'Lato', sans-serif;
      letter-spacing: -0.025em;
      height: 100px;
      background: #f1f5f9;
      border-radius: 12px;
      padding: 12px 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 8px 0 16px 0;
      word-wrap: break-word;
      hyphens: auto;
      overflow: hidden;
      cursor: pointer;
      transition: color var(--transition-base);
    }

    .card-title:hover {
      color: var(--iaml-blue);
    }

    .program-name {
      margin-bottom: var(--spacing-xs);
      text-align: center;
      max-width: 100%;
      overflow: hidden;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      line-height: 1.2;
    }

    .grid-program-details-link {
      color: #4a90e2;
      text-decoration: underline;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s ease;
      border-radius: 4px;
      padding: 4px 8px;
      display: inline-block;
      text-align: center;
      width: 100%;
      font-size: 14px;
      font-family: 'Lato', sans-serif;
    }

    .grid-program-details-link:hover {
      color: #2c5aa0;
      text-decoration: underline;
      transform: translateY(-1px);
    }

    /* Card Actions */
    .card-actions {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: auto;
      padding-top: 24px;
      border-top: 1px solid #e2e8f0;
    }

    .card-actions .btn-primary,
    .card-actions .btn-secondary {
      flex: 1;
      padding: 14px 20px;
      border-radius: 8px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: center;
      border: none;
      text-transform: uppercase;
      letter-spacing: 0.025em;
    }

    .card-actions .btn-primary {
      background: linear-gradient(135deg, #e93d3d 0%, #c42e2e 100%);
      color: white;
      font-family: 'Lato', sans-serif;
      font-weight: 700;
      box-shadow: 0 4px 12px rgba(233, 61, 61, 0.25);
    }

    .card-actions .btn-primary:hover {
      background: linear-gradient(135deg, #c42e2e 0%, #a52525 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(233, 61, 61, 0.4);
    }

    .card-actions .btn-secondary {
      background: linear-gradient(135deg, #28528c 0%, #1e3a8a 100%);
      color: white;
      font-family: 'Lato', sans-serif;
      font-weight: 700;
      box-shadow: 0 4px 12px rgba(40, 82, 140, 0.25);
    }

    .card-actions .btn-secondary:hover {
      background: linear-gradient(135deg, #1e3a8a 0%, #1e293b 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(40, 82, 140, 0.4);
    }

    /* Learn More Button - Single CTA for cards */
    .card-actions .btn-learn-more {
      width: 100%;
      padding: 14px 20px;
      border-radius: 8px;
      font-size: 0.95rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: center;
      border: none;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-family: 'Lato', sans-serif;
      background: linear-gradient(135deg, #28528c 0%, #1e3a8a 100%);
      color: white;
      box-shadow: 0 4px 12px rgba(40, 82, 140, 0.25);
    }

    .card-actions .btn-learn-more:hover {
      background: linear-gradient(135deg, #1e3a8a 0%, #1e293b 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(40, 82, 140, 0.4);
    }

    /* Professional Credits Badges - Glass Morphism Pills */
    .credit-badge {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin: 0;
      white-space: nowrap;
      background: rgba(255, 255, 255, 0.15);
      color: #28528c;
      border: 1px solid rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.2);
      vertical-align: middle;
      transition: all 0.3s ease;
      cursor: default;
      font-family: 'Lato', sans-serif;
    }

    /* SHRM Credits Badge - Glass Blue */
    .shrm-badge {
      background: rgba(59, 130, 246, 0.15);
      color: #1e40af;
      border: 1px solid rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      box-shadow: 0 4px 8px rgba(59, 130, 246, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.3);
    }

    .shrm-badge:hover {
      background: rgba(59, 130, 246, 0.2);
      border-color: rgba(255, 255, 255, 0.4);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(59, 130, 246, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.4);
    }

    /* HRCI Credits Badge - Glass Green */
    .hrci-badge {
      background: rgba(34, 197, 94, 0.15);
      color: #15803d;
      border: 1px solid rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      box-shadow: 0 4px 8px rgba(34, 197, 94, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.3);
    }

    .hrci-badge:hover {
      background: rgba(34, 197, 94, 0.2);
      border-color: rgba(255, 255, 255, 0.4);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(34, 197, 94, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.4);
    }

    /* CLE Credits Badge - Glass Red */
    .cle-badge {
      background: rgba(239, 68, 68, 0.15);
      color: #dc2626;
      border: 1px solid rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      box-shadow: 0 4px 8px rgba(239, 68, 68, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.3);
    }

    .cle-badge:hover {
      background: rgba(239, 68, 68, 0.2);
      border-color: rgba(255, 255, 255, 0.4);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(239, 68, 68, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.4);
    }

    /* TBD Badge - Glass Gray */
    .tbd-badge {
      background: rgba(107, 114, 128, 0.15);
      color: #4b5563;
      border: 1px solid rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      box-shadow: 0 4px 8px rgba(107, 114, 128, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.3);
    }

    .tbd-badge:hover {
      background: rgba(107, 114, 128, 0.2);
      border-color: rgba(255, 255, 255, 0.4);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(107, 114, 128, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.4);
    }

    .credits-container {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
      justify-content: flex-start;
    }

    /* LIST VIEW - PROGRAMS GRID CONTAINER (TABLE-BASED) */
    .calendar-display.list-view {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      border: 1px solid #e0e6ed;
      margin: 16px;
    }

    /* Header Styling */
    .list-header {
      background: #28528c !important;
      color: white;
      display: grid;
      grid-template-columns: 200px 1.7fr 1.3fr 180px;
      gap: 0;
      padding: 18px 16px;
      font-weight: 700;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin: 0;
      border-radius: 0;
      box-shadow: none;
      position: static;
      z-index: auto;
      align-items: center;
    }

    .list-header > div:not(:last-child) {
      border-right: none;
      padding: 0 20px 0 16px;
      text-align: left;
      justify-content: flex-start;
      align-items: flex-start;
    }

    .list-header > div:last-child {
      border-right: none;
      text-align: center;
      padding: 0 16px;
    }

    /* Row Styling */
    .list-item {
      border-bottom: none;
      transition: all 0.3s ease;
      display: grid;
      grid-template-columns: 200px 1.7fr 1.3fr 180px;
      gap: 0;
      padding: 18px 16px;
      margin: 0;
      border-radius: 0;
      align-items: start;
      cursor: pointer;
      position: relative;
      background: #ffffff;
      box-shadow: none;
      min-height: 90px;
    }

    .list-item:hover {
      background: rgba(255, 255, 255, 0.7);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(40, 82, 140, 0.1);
    }

    .list-item:last-child {
      border-bottom: none;
      margin-bottom: 0;
    }

    .list-item:nth-child(even) {
      background: rgba(248, 250, 252, 0.6);
    }

    .list-item:nth-child(even):hover {
      background: rgba(255, 255, 255, 0.7);
    }

    .list-item > div:not(:last-child) {
      border-right: none;
      padding-right: 16px;
    }

    .list-item > div:last-child {
      border-right: none;
      text-align: center;
      vertical-align: middle;
    }

    /* Date Cell */
    .list-date {
      min-width: 180px;
      font-weight: 500;
      color: #1e293b;
      font-size: 1rem;
      line-height: 1.2;
      display: flex;
      flex-direction: column;
      gap: 4px;
      padding: 0 20px 0 16px;
    }

    .grid-date-range {
      font-size: 15px;
      font-weight: 600;
      color: #333;
      margin-bottom: 4px;
    }

    .grid-date-details {
      font-size: 12px;
      color: #666;
      line-height: 1.4;
    }

    /* Program Cell */
    .list-program {
      min-width: 200px;
      max-width: 300px;
      font-size: 15px;
      font-weight: 600;
      color: #28528c;
      text-decoration: none;
      line-height: 1.3;
      display: block;
      padding: 2px 20px 2px 0;
      margin: 0 0 0 16px;
      background: none;
      border: none;
      box-shadow: none;
      border-radius: 0;
      transition: all 0.3s ease;
      font-family: 'Lato', sans-serif;
    }

    .list-program:hover {
      color: #1a3660;
      text-decoration: underline;
    }

    .program-details-link {
      color: #4a90e2;
      text-decoration: underline;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s ease;
      border-radius: 4px;
      padding: 2px 4px;
      margin-top: 6px;
      font-size: 12px;
      line-height: 1.2;
      display: block;
      margin-left: 0;
      text-align: left;
      width: auto;
      font-family: 'Lato', sans-serif;
    }

    .program-details-link:hover {
      color: #2c5aa0;
      text-decoration: underline;
      transform: translateY(-1px);
    }

    /* Location Cell */
    .list-location {
      min-width: 180px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      padding: 0 20px 0 16px;
      text-align: left;
      align-items: flex-start;
    }

    .location-city {
      font-size: 16px;
      font-weight: 700;
      color: #28528c;
      margin-bottom: 6px;
      text-align: left;
    }

    .venue-name {
      font-weight: 600;
      color: #333;
      font-size: 13px;
      text-align: left;
    }

    /* Professional Credits Cell */
    .list-credits {
      min-width: 120px;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      padding: 4px 16px 4px 16px;
    }

    .list-credits .credits-container {
      width: 100% !important;
      display: flex !important;
      flex-direction: row !important;
      flex-wrap: wrap !important;
      align-items: center !important;
      justify-content: flex-start !important;
      gap: 4px !important;
      overflow: visible !important;
      max-width: 100% !important;
    }

    .list-credits .credit-badge {
      padding: 6px 12px;
      background: #f1f3f4;
      border: 1px solid #e1e5e9;
      border-radius: 16px;
      font-family: 'Lato', sans-serif;
      font-size: 10px;
      font-weight: 600;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 0.3px;
      white-space: nowrap;
      flex-shrink: 0;
      box-shadow: none;
    }

    /* Registration Button */
    .list-actions {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 0 16px;
      gap: 8px;
    }

    .list-actions .btn-primary {
      background: linear-gradient(135deg, #e93d3d 0%, #c42e2e 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-family: 'Lato', sans-serif;
      font-weight: 700;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(233, 61, 61, 0.3);
      min-width: 120px;
    }

    .list-actions .btn-primary:hover {
      background: linear-gradient(135deg, #c42e2e 0%, #a52525 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(233, 61, 61, 0.4);
    }

    .list-actions .btn-primary:active {
      transform: translateY(0);
    }

    .list-actions .btn-secondary {
      background: transparent;
      color: #28528c;
      border: 2px solid #28528c;
      padding: 10px 16px;
      border-radius: 8px;
      font-family: 'Lato', sans-serif;
      font-weight: 700;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 80px;
    }

    .list-actions .btn-secondary:hover {
      background: #28528c;
      color: white;
      transform: translateY(-2px);
    }

    /* Learn More Button - List View */
    .list-actions .btn-learn-more {
      background: linear-gradient(135deg, #28528c 0%, #1e3a8a 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-family: 'Lato', sans-serif;
      font-weight: 700;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(40, 82, 140, 0.25);
    }

    .list-actions .btn-learn-more:hover {
      background: linear-gradient(135deg, #1e3a8a 0%, #1e293b 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(40, 82, 140, 0.4);
    }

    /* Responsive Styles - Mobile & Tablet */
    @media (max-width: 1024px) {
      .calendar-container {
        padding: 0 var(--spacing-md);
      }

      .calendar-controls {
        flex-direction: column;
        align-items: stretch;
        gap: var(--spacing-md);
      }

      .filter-controls {
        max-width: none;
        flex-wrap: wrap;
        justify-content: center;
      }

      .view-switcher {
        justify-content: center;
      }

      .calendar-display.cards-view {
        grid-template-columns: repeat(2, 1fr);
        gap: var(--spacing-md);
      }

      .list-header,
      .list-item {
        grid-template-columns: 2fr 1.2fr 1fr 150px;
        font-size: 0.8rem;
      }
    }

    /* Mobile Styles (max-width: 768px) */
    @media (max-width: 768px) {
      .seminar-calendar-section {
        padding: var(--spacing-lg) 0;
      }

      .calendar-container {
        padding: 0 var(--spacing-sm);
      }

      .calendar-controls {
        padding: var(--spacing-sm);
        gap: var(--spacing-sm);
      }

      .view-switcher {
        display: none;
      }

      .view-btn {
        flex: 1;
        padding: 10px 8px;
        font-size: 0.875rem;
      }

      .filter-controls {
        flex-direction: column;
        gap: var(--spacing-sm);
        width: 100%;
      }

      .filter-group {
        min-width: auto;
        width: 100%;
      }

      .filter-select {
        width: 100%;
      }

      .filter-actions {
        width: 100%;
        justify-content: center;
      }

      .btn-clear {
        width: 100%;
      }

      .calendar-display {
        display: grid;
        grid-template-columns: 1fr;
        gap: var(--spacing-md);
      }

      .calendar-display.list-view {
        display: none;
      }

      .calendar-display.cards-view {
        grid-template-columns: 1fr;
        gap: var(--spacing-md);
      }

      .seminar-card {
        margin: 0;
        margin-bottom: var(--spacing-md);
      }

      .card-image-container {
        height: 180px;
      }

      .card-content {
        padding: var(--spacing-sm);
      }

      .card-title {
        font-size: 0.95rem;
      }

      .card-actions {
        flex-direction: column;
        gap: 6px;
      }

      .card-actions .btn-primary,
      .card-actions .btn-secondary {
        width: 100%;
      }

      .modal-content {
        width: 95%;
        padding: var(--spacing-md);
        max-height: 90vh;
      }

      .modal-content h2 {
        font-size: 1.5rem;
        margin-bottom: var(--spacing-md);
      }

      .modal-content img {
        height: 150px;
      }

      .modal-actions {
        flex-direction: column;
        gap: 6px;
      }

      .loading-container {
        padding: var(--spacing-lg);
      }

      .loading-text {
        font-size: 0.95rem;
      }

      .empty-state {
        padding: var(--spacing-lg);
      }

      .filter-section {
        display: block;
      }

      .filter-group select {
        padding: 8px 30px 8px 12px;
        font-size: 0.85rem;
        min-width: 100%;
        max-width: 100%;
      }

      .filter-actions {
        flex: 0 0 auto;
        margin-left: 0;
        margin-top: 20px;
      }
    }

    /* Extra Small Mobile (max-width: 480px) */
    @media (max-width: 480px) {
      .calendar-controls {
        padding: var(--spacing-xs);
      }

      .view-btn {
        padding: 8px 6px;
        font-size: 0.8rem;
      }

      .card-image-container {
        height: 160px;
      }

      .card-title {
        font-size: 0.9rem;
      }

      .card-content {
        padding: var(--spacing-xs);
      }

      .modal-content {
        padding: var(--spacing-sm);
      }

      .modal-close {
        top: var(--spacing-xs);
        right: var(--spacing-xs);
      }
    }

    /* Focus and Accessibility */
    @media (prefers-reduced-motion: reduce) {
      .iaml-calendar-widget * {
        animation-duration: 0.01ms;
        animation-iteration-count: 1;
        transition-duration: 0.01ms;
      }

      .seminar-card:hover {
        transform: none;
      }

      .card-actions .btn-primary:hover {
        transform: none;
      }
    }

    /* Force Lato for all calendar widget elements */
    .iaml-calendar-widget *,
    .iaml-calendar-widget h1,
    .iaml-calendar-widget h2,
    .iaml-calendar-widget h3,
    .iaml-calendar-widget h4,
    .iaml-calendar-widget h5,
    .iaml-calendar-widget h6,
    .iaml-calendar-widget p,
    .iaml-calendar-widget div,
    .iaml-calendar-widget span,
    .iaml-calendar-widget a,
    .iaml-calendar-widget button,
    .iaml-calendar-widget select,
    .iaml-calendar-widget option,
    .iaml-calendar-widget input,
    .iaml-calendar-widget label {
      font-family: 'Lato', sans-serif !important;
    }

    /* Clean minimal filter design - No Background */
    .iaml-calendar-widget .calendar-controls {
      margin-bottom: var(--spacing-lg) !important;
      border-radius: 0 !important;
      box-shadow: none !important;
    }

    .iaml-calendar-widget .filter-section {
      background: transparent !important;
      padding: 0 !important;
    }

    .iaml-calendar-widget .filter-controls {
      background: transparent !important;
      padding: 0 !important;
    }

    .iaml-calendar-widget .filter-select,
    .iaml-calendar-widget .btn-clear,
    .iaml-calendar-widget .view-btn {
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08) !important;
      border: 1px solid rgba(255, 255, 255, 0.2) !important;
    }

    .iaml-calendar-widget .filter-select:hover,
    .iaml-calendar-widget .btn-clear:hover,
    .iaml-calendar-widget .view-btn:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12) !important;
      transform: translateY(-1px) !important;
    }

    .iaml-calendar-widget .filter-group {
      margin: 0 !important;
    }

    .iaml-calendar-widget .view-switcher {
      background: transparent !important;
      border-radius: 0 !important;
    }

    /* Nuclear background removal */
    .calendar-controls,
    .iaml-calendar-widget .calendar-controls,
    div.calendar-controls {
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
      box-shadow: none !important;
      border: none !important;
    }

    /* Blue theme consistency */
    .iaml-calendar-widget .filter-select,
    .iaml-calendar-widget .btn-clear,
    .iaml-calendar-widget .view-btn,
    .filter-select,
    .btn-clear {
      color: #28528c !important;
      border-color: #d1d5db !important;
      font-weight: 500 !important;
    }

    .view-btn {
      color: #28528c !important;
      border-color: rgba(40, 82, 140, 0.3) !important;
      font-weight: 500 !important;
    }

    .iaml-calendar-widget .filter-select:hover,
    .iaml-calendar-widget .btn-clear:hover,
    .filter-select:hover,
    .btn-clear:hover {
      color: #28528c !important;
      border-color: #28528c !important;
      background: #f8fafc !important;
    }

    .iaml-calendar-widget .view-btn:hover,
    .view-btn:hover {
      color: #28528c !important;
      border-color: rgba(40, 82, 140, 0.5) !important;
      background: rgba(40, 82, 140, 0.05) !important;
    }

    .iaml-calendar-widget .filter-select:focus,
    .iaml-calendar-widget .btn-clear:focus,
    .filter-select:focus,
    .btn-clear:focus {
      color: #28528c !important;
      border-color: #28528c !important;
      outline: 2px solid rgba(40, 82, 140, 0.2) !important;
      outline-offset: 2px !important;
    }

    .iaml-calendar-widget .view-btn:focus,
    .view-btn:focus {
      color: #28528c !important;
      border-color: rgba(40, 82, 140, 0.6) !important;
      outline: 2px solid rgba(40, 82, 140, 0.2) !important;
      outline-offset: 2px !important;
    }

    .iaml-calendar-widget .view-btn.active,
    .view-btn.active {
      background: rgb(237 237 238) !important;
      color: #28528c !important;
      border-color: rgba(40, 82, 140, 0.4) !important;
      font-weight: 600 !important;
    }

    .iaml-calendar-widget select option,
    select option {
      color: #28528c !important;
      background: white !important;
    }

    /* Subtle toggle background */
    .iaml-calendar-widget .view-switcher,
    .view-switcher {
      background: rgba(40, 82, 140, 0.05) !important;
      border: 1px solid rgb(237 237 238 / 35%) !important;
      border-radius: 8px !important;
      padding: 4px !important;
      backdrop-filter: blur(5px) !important;
      -webkit-backdrop-filter: blur(5px) !important;
    }

    .iaml-calendar-widget .view-btn,
    .view-btn {
      background: transparent !important;
      border: 1px solid rgba(40, 82, 140, 0.2) !important;
      transition: all 0.3s ease !important;
    }

    .iaml-calendar-widget .view-btn.active,
    .view-btn.active {
      background: rgb(237 237 238) !important;
      border-color: rgba(40, 82, 140, 0.3) !important;
      box-shadow: 0 2px 4px rgba(40, 82, 140, 0.1) !important;
    }

    .iaml-calendar-widget .view-btn:hover,
    .view-btn:hover {
      background: rgb(237 237 238) !important;
      transform: translateY(-1px) !important;
    }

    /* Fix toggle padding */
    .iaml-calendar-widget .view-switcher,
    .view-switcher {
      padding: 10px !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      box-sizing: border-box !important;
    }

    .iaml-calendar-widget .view-btn,
    .view-btn {
      margin: 0 !important;
      align-self: center !important;
      line-height: 1 !important;
    }

    /* Remove filter brackets - Clean focus styles */
    .iaml-calendar-widget .filter-group select:focus,
    .iaml-calendar-widget .btn-clear:focus,
    .iaml-calendar-widget .view-btn:focus,
    .filter-group select:focus,
    .btn-clear:focus,
    .view-btn:focus {
      outline: none !important;
      box-shadow: 0 0 0 2px rgba(40, 82, 140, 0.25) !important;
    }

    /* ===== CTA SECTION STYLES ===== */
    .cta-button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 16px 32px;
      background: var(--blue-primary, #188BF6);
      color: var(--white, #ffffff);
      border: none;
      border-radius: 12px;
      font-family: 'Lato', sans-serif;
      font-size: 16px;
      font-weight: 600;
      text-decoration: none;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 4px 12px rgba(24, 139, 246, 0.3);
    }

    .cta-button:hover {
      background: var(--primary-blue-hover, #1478d1);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(24, 139, 246, 0.4);
    }

    .cta-button:active { transform: translateY(0); }
    .cta-button:focus { outline: none; }
    .cta-button:focus-visible {
      outline: 2px solid var(--blue-primary, #188BF6);
      outline-offset: 4px;
    }

    .cta-button.cta-red {
      background: #DC2626;
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
    }

    .cta-button.cta-red:hover {
      background: #B91C1C;
      box-shadow: 0 8px 20px rgba(220, 38, 38, 0.4);
    }

    .cta-button.cta-red:focus-visible {
      outline: 2px solid #DC2626;
      outline-offset: 4px;
    }

    .cta-button-group {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      flex-wrap: wrap;
    }

    @media (max-width: 500px) {
      .cta-button-group {
        flex-direction: column;
        width: 100%;
      }
      .cta-button {
        width: 100%;
        max-width: 300px;
      }
    }

    .cta-cascade { display: block; line-height: 1.05; }
    @media (max-width: 768px) { .cta-cascade { font-size: clamp(2rem, 8vw, 3rem); } }

    #iaml-cta h2 { margin: 0 0 0.5rem 0; }
    .cta-cascade { margin: 0.1em 0 0.15em 0; }
    .my-lg { margin-top: 1rem; margin-bottom: 1.5rem; }

    #iaml-cta { font-size: 16px; }
    #iaml-cta h2 { font-family: 'Lato', sans-serif !important; font-size: clamp(20.4px, 2.64vw, 36.8px); line-height: 1.1; letter-spacing: -0.02em; }
    #iaml-cta .cta-cascade { font-size: clamp(34.4px, 4.31vw, 59.7px); line-height: 1.05; margin: 0.1em 0 0.15em 0; font-weight: 500; font-family: 'Playfair Display', serif; font-style: italic; letter-spacing: -0.01em; }
    #iaml-cta h2 { color: var(--light-text-primary, #1f2937); }
    #iaml-cta .text-brand { color: var(--blue-primary, #188bf6) !important; }

    #iaml-cta h2.text-primary { color: #1f2937 !important; }
    #iaml-cta .text-secondary { color: #475569 !important; }

    #iaml-cta.py-5xl {
      padding-top: 15rem;
      padding-bottom: 15rem;
    }

    /* ===== CONNECT MODAL STYLES ===== */
    #connectPopup_waitText2 { margin-bottom: 30px; }
    .all-set { background: transparent !important; border: none !important; }
    .connectPopup-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,.6); backdrop-filter: blur(4px); z-index: 10000; opacity: 0; transition: opacity .3s ease; pointer-events: none; }
    .connectPopup-overlay.active { display: flex; align-items: center; justify-content: center; opacity: 1; pointer-events: auto; }
    .connectPopup-modal { background: #fff; border-radius: 16px; box-shadow: 0 24px 48px rgba(0,0,0,.2), 0 8px 16px rgba(0,0,0,.1); max-width: 560px; width: 92%; max-height: 90vh; overflow-y: auto; transform: scale(.9) translateY(20px); transition: transform .3s cubic-bezier(.4,0,.2,1); }
    .connectPopup-overlay.active .connectPopup-modal { transform: scale(1) translateY(0); }
    .connectPopup-header { display: flex; justify-content: space-between; align-items: center; padding: 40px; border-bottom: 1px solid #e5e7eb; background: linear-gradient(135deg, #28528c 0%, #222639 100%); color: #fff; }
    .connectPopup-header h3 { font-family: 'Lato', sans-serif; font-size: 1.3rem; font-weight: 700; margin: 0; color: #fff !important; }
    .connectPopup-closeBtn { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #fff; padding: 4px; border-radius: 4px; transition: all .2s ease; line-height: 1; }
    .connectPopup-closeBtn:hover { background: rgba(255,255,255,.1); }
    .connectPopup-body { padding: 40px; }
    .connectPopup-body p { font-family: 'Lato', sans-serif; font-size: 1rem; color: #4b5563; margin-bottom: 18px; line-height: 1.6; }
    .connectPopup-form { display: flex; flex-direction: column; gap: 16px; }
    .connectPopup-group { display: flex; flex-direction: column; }
    .connectPopup-group label { font-family: 'Lato', sans-serif; font-size: .875rem; font-weight: 600; color: #374151; margin-bottom: 6px; }
    .connectPopup-group input, .connectPopup-group textarea { font-family: 'Lato', sans-serif; font-size: 1rem; padding: 12px 16px; border: 1px solid #d1d5db; border-radius: 8px; background: #fff; color: #1f2937; transition: all .2s ease; }
    .connectPopup-group input::placeholder, .connectPopup-group textarea::placeholder { color: #9ca3af; }
    .connectPopup-group input:focus, .connectPopup-group textarea:focus { outline: none; border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59,130,246,.1); }
    .connectPopup-submitBtn { padding: 14px 28px; border-radius: 12px; font-family: 'Lato', sans-serif; font-size: 1rem; font-weight: 700; cursor: pointer; transition: all .3s cubic-bezier(.4,0,.2,1); text-transform: uppercase; letter-spacing: .5px; border: none; width: 100%; background: linear-gradient(135deg, rgba(59,130,246,.9) 0%, rgba(37,99,235,.95) 100%); color: #fff; box-shadow: 0 8px 24px rgba(59,130,246,.25), 0 2px 6px rgba(0,0,0,.1); }
    .connectPopup-submitBtn:hover:not(:disabled) { transform: translateY(-2px); background: linear-gradient(135deg, rgba(59,130,246,1) 0%, rgba(37,99,235,1) 100%); box-shadow: 0 12px 32px rgba(59,130,246,.35), 0 4px 12px rgba(0,0,0,.15); }
    .connectPopup-submitBtn:disabled { opacity: .6; cursor: not-allowed; }
    .connectPopup-thinking { display: flex; align-items: center; gap: 14px; background: #f8fafc; border: 1px solid #e5e7eb; border-radius: 12px; padding: 18px 16px; }
    .phone-pulse { width: 38px; height: 38px; border-radius: 10px; place-items: center; background: #28528c; position: relative; overflow: visible; display: none !important; }
    .phone-pulse::after, .phone-pulse::before { content: ""; position: absolute; inset: -6px; border-radius: 12px; border: 2px solid rgba(40,82,140,.35); animation: pulse 1.8s ease-out infinite; }
    .phone-pulse::before { animation-delay: .9s; }
    @keyframes pulse { 0% { transform: scale(.7); opacity: 1; } 100% { transform: scale(1.5); opacity: 0; } }
    .phone-pulse svg { width: 20px; height: 20px; fill: #fff; }
    .dots { display: inline-flex; gap: 6px; align-items: flex-end; }
    .dots i { width: 6px; height: 6px; border-radius: 50%; background: #28528c; opacity: .35; animation: blink 1.1s infinite; }
    .dots i:nth-child(2) { animation-delay: .15s; }
    .dots i:nth-child(3) { animation-delay: .3s; }
    @keyframes blink { 0%, 80%, 100% { opacity: .25; transform: translateY(0); } 40% { opacity: 1; transform: translateY(-4px); } }
    .muted { color: #6b7280; font-size: .95rem; }
    .small-gap { margin-top: 8px; }
    @media (max-width: 600px) { .connectPopup-modal { margin: 20px; width: calc(100% - 40px); } .connectPopup-header, .connectPopup-body { padding: 20px; } }

    /* Countdown timer styles */
    .phone-pulse-with-timer { position: relative; width: 80px; height: 80px; display: flex !important; align-items: center; justify-content: center; flex-shrink: 0; }
    .countdown-circle { position: absolute; width: 100%; height: 100%; }
    .countdown-bg { opacity: 0.2; }
    .countdown-progress { stroke-dasharray: 138.23; stroke-dashoffset: 0; transition: stroke-dashoffset 1s linear; }
    .countdown-number { position: absolute; font-size: 20px; font-weight: 700; color: #28528c; z-index: 2; }
    .phone-icon-small { position: absolute; width: 20px; height: 20px; fill: #fff; background: #28528c; border-radius: 6px; padding: 4px; z-index: 1; bottom: 8px; right: 8px; }

    /* ===== PROGRAM DETAILS MODAL ===== */
    .programModal-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
      z-index: 10000;
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
      overflow-y: auto;
      padding: 40px 20px;
    }

    .programModal-overlay.active {
      display: flex;
      align-items: flex-start;
      justify-content: center;
      opacity: 1;
      pointer-events: auto;
    }

    .programModal-content {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 24px 48px rgba(0, 0, 0, 0.2);
      max-width: 700px;
      width: 100%;
      max-height: none;
      overflow: visible;
      transform: scale(0.9) translateY(20px);
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      margin: auto;
    }

    .programModal-overlay.active .programModal-content {
      transform: scale(1) translateY(0);
    }

    .programModal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      background: rgba(255, 255, 255, 0.9);
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #374151;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      z-index: 10;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    .programModal-close:hover {
      background: #fff;
      color: #1f2937;
      transform: scale(1.1);
    }

    .programModal-image {
      width: 100%;
      height: 220px;
      background-size: cover;
      background-position: center;
      border-radius: 16px 16px 0 0;
      position: relative;
    }

    .programModal-image::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, transparent 50%, rgba(0, 0, 0, 0.4) 100%);
      border-radius: 16px 16px 0 0;
    }

    .programModal-body {
      padding: 32px;
    }

    .programModal-format-badge {
      display: inline-block;
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 12px;
      font-family: 'Lato', sans-serif;
    }

    .programModal-format-badge.in-person {
      background: linear-gradient(135deg, #28528c 0%, #1e3a5f 100%);
      color: #fff;
    }

    .programModal-format-badge.virtual {
      background: linear-gradient(135deg, #059669 0%, #047857 100%);
      color: #fff;
    }

    .programModal-format-badge.on-demand {
      background: linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%);
      color: #fff;
    }

    .programModal-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.75rem;
      font-weight: 600;
      color: #1f2937;
      margin: 0 0 20px 0;
      line-height: 1.3;
    }

    .programModal-meta {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      padding: 20px;
      background: #f8fafc;
      border-radius: 12px;
      margin-bottom: 24px;
    }

    .programModal-meta-item {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .programModal-meta-label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: #6b7280;
      font-family: 'Lato', sans-serif;
    }

    .programModal-meta-value {
      font-size: 14px;
      font-weight: 600;
      color: #1f2937;
      font-family: 'Lato', sans-serif;
    }

    .programModal-blocks {
      margin-bottom: 24px;
    }

    .programModal-blocks-title {
      font-size: 14px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: #374151;
      margin-bottom: 16px;
      font-family: 'Lato', sans-serif;
    }

    .programModal-block {
      background: #f8fafc;
      border-radius: 10px;
      padding: 16px;
      margin-bottom: 12px;
    }

    .programModal-block:last-child {
      margin-bottom: 0;
    }

    .programModal-block-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 8px;
    }

    .programModal-block-title {
      font-size: 15px;
      font-weight: 700;
      color: #1f2937;
      font-family: 'Lato', sans-serif;
    }

    .programModal-block-number {
      font-size: 11px;
      font-weight: 600;
      color: #fff;
      background: #28528c;
      padding: 2px 8px;
      border-radius: 10px;
      font-family: 'Lato', sans-serif;
    }

    .programModal-block-meta {
      font-size: 13px;
      color: #6b7280;
      font-family: 'Lato', sans-serif;
      line-height: 1.5;
    }

    .programModal-block-meta span {
      display: block;
    }

    .programModal-actions {
      display: flex;
      gap: 12px;
    }

    .programModal-btn {
      flex: 1;
      padding: 14px 24px;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      text-decoration: none;
      text-align: center;
      transition: all 0.2s ease;
      font-family: 'Lato', sans-serif;
      cursor: pointer;
      border: none;
    }

    .programModal-btn-primary {
      background: linear-gradient(135deg, #e93d3d 0%, #c42e2e 100%);
      color: #fff;
      box-shadow: 0 4px 12px rgba(233, 61, 61, 0.3);
    }

    .programModal-btn-primary:hover {
      background: linear-gradient(135deg, #c42e2e 0%, #a52525 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(233, 61, 61, 0.4);
    }

    .programModal-btn-secondary {
      background: #fff;
      color: #28528c;
      border: 2px solid #28528c;
    }

    .programModal-btn-secondary:hover {
      background: #28528c;
      color: #fff;
      transform: translateY(-2px);
    }

    @media (max-width: 600px) {
      .programModal-overlay {
        padding: 20px 12px;
      }

      .programModal-content {
        border-radius: 12px;
      }

      .programModal-image {
        height: 180px;
        border-radius: 12px 12px 0 0;
      }

      .programModal-body {
        padding: 20px;
      }

      .programModal-title {
        font-size: 1.4rem;
      }

      .programModal-meta {
        grid-template-columns: 1fr;
        gap: 12px;
      }

      .programModal-actions {
        flex-direction: column;
      }

      .programModal-btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>

  <!-- ===== HEADER ===== -->
  <!-- Header placeholder (loaded by components.js) -->
  <div id="header-placeholder"></div>

  <!-- NoScript fallback for progressive enhancement -->
  <noscript>
    <nav style="position: fixed; top: 0; width: 100%; background: white; padding: 16px; text-align: center; z-index: 1000;">
      <a href="/">Home</a> |
      <a href="/featured-programs">Programs</a> |
      <a href="/pages/corporate-training">Corporate</a> |
      <a href="/about-us">Why IAML</a>
    </nav>
  </noscript>

  <!-- ===== MAIN CONTENT ===== -->
  <main>

    <!-- Hero Section -->
    <section class="hero-section">
      <div class="program-schedule-hero">
        <p class="trusted-text">MULTIPLE FORMATS, FREQUENT SCHEDULES &bull; FIND YOUR PREFERRED OPTION</p>

        <h1 class="main-headline">
          Upcoming Programs
        </h1>

        <p class="description">
          While other companies make you wait 3-6 months for their next program, we run workplace law training every few weeks across multiple formats. Choose virtual, in-person, on-demand, or bring training to your team - whatever works for your schedule and learning style.
        </p>

        <div class="button-container">
          <a href="#" class="btn btn-primary btn-lg">View Schedule</a>
          <a href="#" class="btn btn-register btn-lg">Register Now</a>
        </div>
      </div>
    </section>

    <!-- Schedule Section -->
    <section class="schedule-section">
      <div class="schedule-v2b-container">
        <!-- Filters -->
        <div class="schedule-v2b-filters">
          <select class="schedule-v2b-filter" id="programTypeFilter" aria-label="Filter by program type">
            <option value="">All Types</option>
            <option value="employment-law">Employment Law</option>
            <option value="benefits-law">Benefits Law</option>
            <option value="hr-management">HR Management</option>
          </select>
          <select class="schedule-v2b-filter" id="formatFilter" aria-label="Filter by format">
            <option value="">All Formats</option>
            <option value="in-person">In-Person</option>
            <option value="virtual">Virtual</option>
          </select>
          <select class="schedule-v2b-filter" id="programFilter" aria-label="Filter by program">
            <option value="">All Programs</option>
          </select>
          <button class="schedule-v2b-clear" id="clearFilters">Clear</button>
        </div>

        <!-- Program List -->
        <div class="schedule-v2b-list" id="programList">
          <div class="schedule-v2-loading">
            <div class="schedule-v2-loading-spinner"></div>
            <p>Loading programs...</p>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section id="iaml-cta" class="theme-light py-5xl">
      <div class="container container-lg mx-auto text-center">
        <div class="mx-auto">
          <h2 class="font-body text-display-lg text-primary font-light tracking-tight">
            Experience the
            <span class="cta-cascade font-display text-hero text-brand">Professional's Choice in Training</span>
          </h2>

          <p class="font-body text-large text-secondary my-lg">Real-world expertise. Guaranteed results. Trusted since 1979.</p>

          <div class="cta-button-group">
            <button class="cta-button hover-lift" id="openContactModal" aria-label="Open contact form" onclick="connectPopup_open()">
              Let's Talk
            </button>
            <a href="#" class="cta-button cta-red hover-lift" aria-label="Register now">
              Register Now
            </a>
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- ===== FOOTER ===== -->
  <!-- Footer placeholder (loaded by components.js) -->
  <div id="footer-placeholder"></div>

  <!-- Connect Modal -->
  <div class="connectPopup-overlay" id="connectPopup_Modal" onclick="connectPopup_closeOnOverlay(event)">
    <div class="connectPopup-modal" onclick="event.stopPropagation();">
      <div class="connectPopup-header">
        <h3>Connect with us in 20 seconds or less</h3>
        <button class="connectPopup-closeBtn" onclick="connectPopup_close()" aria-label="Close">&times;</button>
      </div>
      <div class="connectPopup-body" id="connectPopup_Content">
        <!-- dynamic content injected by JS -->
      </div>
    </div>
  </div>

  <!-- Program Details Modal -->
  <div class="programModal-overlay" id="programModal" onclick="closeProgramModal(event)">
    <div class="programModal-content" onclick="event.stopPropagation();">
      <button class="programModal-close" onclick="closeProgramModal()" aria-label="Close">&times;</button>
      <div class="programModal-image" id="programModal-image"></div>
      <div class="programModal-body">
        <div class="programModal-format-badge" id="programModal-format"></div>
        <h2 class="programModal-title" id="programModal-title"></h2>
        <div class="programModal-meta">
          <div class="programModal-meta-item">
            <span class="programModal-meta-label">Dates</span>
            <span class="programModal-meta-value" id="programModal-dates"></span>
          </div>
          <div class="programModal-meta-item">
            <span class="programModal-meta-label">Duration</span>
            <span class="programModal-meta-value" id="programModal-duration"></span>
          </div>
          <div class="programModal-meta-item">
            <span class="programModal-meta-label">Location</span>
            <span class="programModal-meta-value" id="programModal-location"></span>
          </div>
        </div>
        <div class="programModal-blocks" id="programModal-blocks">
          <!-- Blocks will be injected here -->
        </div>
        <div class="programModal-actions">
          <a href="#" class="programModal-btn programModal-btn-primary" id="programModal-register">Register Now</a>
          <a href="#" class="programModal-btn programModal-btn-secondary" id="programModal-details">View Full Details</a>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== SCRIPTS ===== -->

  <!-- Dynamic Component Loading -->
  <script src="../js/components.js" defer></script>
  <script src="../js/utm-tracking.js" defer></script>
  <script src="../js/headerBehavior.js" defer></script>
  <script src="../js/mobileMenu.js" defer></script>

  <script>

    // ============================================================================
    // CONNECT MODAL
    // ============================================================================
    const GHL_WEBHOOK = 'YOUR_CONTACT_WEBHOOK_URL_HERE';
    const CONNECT_TIMEOUT_MS = 20000;
    const COUNTDOWN_STYLE = 1;

    let connectTimeoutHandle = null;
    let countdownInterval = null;
    let lastSubmission = { phone: '' };

    function connectPopup_open() {
      const modal = document.getElementById('connectPopup_Modal');
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
      renderStep('form');
    }

    function connectPopup_close() {
      const modal = document.getElementById('connectPopup_Modal');
      modal.classList.remove('active');
      document.body.style.overflow = 'auto';
      clearTimeout(connectTimeoutHandle);
      clearInterval(countdownInterval);
    }

    function connectPopup_closeOnOverlay(e) {
      if (e.target === e.currentTarget) connectPopup_close();
    }

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') connectPopup_close();
    });

    function renderStep(step, payload = {}) {
      const root = document.getElementById('connectPopup_Content');

      if (step === 'form') {
        root.innerHTML = `
          <p>Give us your phone number - we'll connect you with one of our program coordinators who can answer your questions and get you exactly what you need.</p>
          <form class="connectPopup-form" id="connectPopup_Form">
            <div class="connectPopup-group">
              <label for="connectPopup_phone">Phone Number *</label>
              <input type="tel" id="connectPopup_phone" name="phone" placeholder="(555) 555-5555" required />
            </div>
            <button type="submit" class="connectPopup-submitBtn">Connect</button>
          </form>
        `;
        const form = document.getElementById('connectPopup_Form');
        form.addEventListener('submit', connectPopup_submit);

        const phoneInput = document.getElementById('connectPopup_phone');
        phoneInput.addEventListener('input', formatPhoneNumber);
      }

      if (step === 'connecting') {
        root.innerHTML = `
          <div class="connectPopup-thinking" role="status" aria-live="polite">
            <div class="phone-pulse-with-timer" aria-hidden="true">
              <svg class="countdown-circle" viewBox="0 0 50 50">
                <circle class="countdown-bg" cx="25" cy="25" r="22" fill="none" stroke="#28528c" stroke-width="3"/>
                <circle class="countdown-progress" cx="25" cy="25" r="22" fill="none" stroke="#28528c" stroke-width="3"
                        stroke-linecap="round" transform="rotate(-90 25 25)" id="progress-circle"/>
              </svg>
              <div class="countdown-number" id="countdown-number">20</div>
              <svg class="phone-icon-small" viewBox="0 0 24 24">
                <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
              </svg>
            </div>
            <div class="muted">
              <strong>Connecting you in <span id="countdown-text">20</span> seconds...</strong>
              <div class="small-gap muted">We're matching you with the specialist who can best answer your questions about our programs, services, or any other support you need.</div>
            </div>
          </div>
          <p class="muted" style="margin-top:24px;">If a coordinator picks up, we'll connect you right away. Please keep this window open.</p>
        `;
        startCountdown();
      }

      if (step === 'email-fallback') {
        root.innerHTML = `
          <div class="muted" id="connectPopup_waitText1"><strong>We're still trying to connect you...</strong></div>
          <div class="muted small-gap" id="connectPopup_waitText2" style="opacity:0;">Our coordinators are currently helping other professionals with their program decisions, but we don't want to delay your registration process. Let's get your questions answered via email instead.</div>
          <form class="connectPopup-form" id="connectPopup_EmailForm">
            <div class="connectPopup-group">
              <label for="connectPopup_email">Email *</label>
              <input type="email" id="connectPopup_email" name="email" placeholder="you@company.com" required />
            </div>
            <div class="connectPopup-group">
              <label for="connectPopup_question">Question *</label>
              <textarea rows="3" id="connectPopup_question" name="question" placeholder="submit your question" required></textarea>
            </div>
            <button type="submit" class="connectPopup-submitBtn">GET ANSWERS NOW</button>
          </form>
        `;
        requestAnimationFrame(() => setTimeout(() => {
          const el = document.getElementById('connectPopup_waitText2');
          if (el) el.style.opacity = 1;
        }, 1300));
        document.getElementById('connectPopup_EmailForm').addEventListener('submit', connectPopup_submitEmailFallback);
      }

      if (step === 'success') {
        root.innerHTML = `
          <p><strong>Thanks!</strong> We've received your details and a coordinator will reach out shortly.</p>
          <div class="connectPopup-thinking all-set" style="margin-top:10px">
            <div class="phone-pulse" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg>
            </div>
          </div>
        `;
      }

      if (step === 'error') {
        root.innerHTML = `
          <p><strong>Hmm, something went wrong.</strong></p>
          <p class="muted">${payload.message || 'Please try again, or send your details by email below.'}</p>
          <button class="connectPopup-submitBtn" onclick="renderStep('form')">Try Again</button>
        `;
      }
    }

    async function connectPopup_submit(e) {
      e.preventDefault();
      const formData = new FormData(e.target);
      const phone = (formData.get('phone') || '').toString().trim();
      lastSubmission = { phone };

      renderStep('connecting');

      clearTimeout(connectTimeoutHandle);
      connectTimeoutHandle = setTimeout(() => renderStep('email-fallback'), CONNECT_TIMEOUT_MS);

      try {
        const res = await fetch(GHL_WEBHOOK, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            phone,
            tags: 'contact_button_initiated',
            source: 'Website Contact Form',
            contactType: 'lead'
          })
        });

        if (!res.ok) {
          const result = await safeJson(res);
          throw new Error(result?.message || `Request failed (${res.status})`);
        }

        if (typeof gtag !== 'undefined') {
          gtag('event', 'form_submit', { event_category: 'Contact', event_label: 'Connect Modal Success' });
        }
      } catch (err) {
        console.error('GHL error:', err);
        if (typeof gtag !== 'undefined') {
          gtag('event', 'form_error', { event_category: 'Contact', event_label: 'Connect Modal Error', error_message: String(err?.message || err) });
        }
        clearTimeout(connectTimeoutHandle);
        renderStep('email-fallback');
      }
    }

    async function connectPopup_submitEmailFallback(e) {
      e.preventDefault();
      const fd = new FormData(e.target);
      const email = (fd.get('email') || '').toString().trim();

      const btn = e.target.querySelector('.connectPopup-submitBtn');
      btn.disabled = true;
      btn.textContent = 'Sending...';

      try {
        const res = await fetch(GHL_WEBHOOK, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            phone: lastSubmission.phone,
            email,
            tags: 'contact_button_email_fallback',
            source: 'Website Contact Form',
            contactType: 'lead'
          })
        });
        if (!res.ok) {
          const result = await safeJson(res);
          throw new Error(result?.message || `Request failed (${res.status})`);
        }
        renderStep('success');
      } catch (err) {
        console.error('Fallback error:', err);
        renderStep('error', { message: 'We could not send your email just now. Please try again.' });
      }
    }

    function escapeHtml(s) {
      return String(s).replace(/[&<>"']/g, m => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' }[m]));
    }

    async function safeJson(res) {
      try { return await res.json(); } catch { return null; }
    }

    function formatPhoneNumber(e) {
      const input = e.target;
      const value = input.value.replace(/\D/g, '');
      let formatted = '';

      if (value.length > 0) {
        formatted = '(' + value.substring(0, 3);
      }
      if (value.length >= 4) {
        formatted += ') ' + value.substring(3, 6);
      }
      if (value.length >= 7) {
        formatted += '-' + value.substring(6, 10);
      }

      input.value = formatted;
    }

    function startCountdown() {
      clearInterval(countdownInterval);
      let countdownValue = 20;

      countdownInterval = setInterval(() => {
        countdownValue--;

        const numEl = document.getElementById('countdown-number');
        const textEl = document.getElementById('countdown-text');
        const progressEl = document.getElementById('progress-circle');

        if (numEl) numEl.textContent = countdownValue;
        if (textEl) textEl.textContent = countdownValue;
        if (progressEl) {
          const offset = 138.23 * (1 - countdownValue / 20);
          progressEl.style.strokeDashoffset = offset;
        }

        if (countdownValue <= 0) {
          clearInterval(countdownInterval);
        }
      }, 1000);
    }

    // ============================================================================
    // CALENDAR WIDGET - VIEW SWITCHER
    // ============================================================================
    const viewButtons = document.querySelectorAll('.view-btn');
    const calendarDisplay = document.getElementById('calendarDisplay');

    viewButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        viewButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        const view = btn.dataset.view;
        calendarDisplay.classList.remove('cards-view', 'list-view');
        calendarDisplay.classList.add(`${view}-view`);
      });
    });

    // Clear filters
    document.getElementById('clearFilters').addEventListener('click', () => {
      document.getElementById('formatFilter').value = '';
      document.getElementById('programFilter').value = '';
      document.getElementById('locationFilter').value = '';
      // Reset to default view (exclude on-demand and in-person standalone blocks)
      renderPrograms(getDefaultFilteredPrograms());
    });

    // ============================================================================
    // CONFIGURATION
    // ============================================================================
    const TABLE_ID = 'tblympiL1p6PmQz9i';
    let allPrograms = [];

    const ALLOWED_PROGRAMS = [
      'Certificate in Employee Relations Law',
      'Advanced Certificate in Strategic Employment Law',
      'Certificate in Workplace Investigations',
      'Certificate in Strategic HR Leadership',
      'Certificate in Employee Benefits Law',
      'Advanced Certificate in Employee Benefits Law'
    ];

    // Virtual component programs to fetch (these form virtual certificates when paired)
    const VIRTUAL_COMPONENT_PROGRAMS = [
      'Comprehensive Labor Relations',
      'Discrimination Prevention & Defense',
      'HR Law Fundamentals',
      'Strategic HR Management'
    ];

    // Virtual certificate definitions - which component programs combine to form a certificate
    const VIRTUAL_CERTIFICATE_DEFS = {
      'Certificate in Employee Relations Law': {
        components: ['Comprehensive Labor Relations', 'Discrimination Prevention & Defense'],
        slug: 'employee-relations-law',
        description: 'Earn your Certificate in Employee Relations Law through two virtual sessions. Complete both components within the program window to receive your full certificate.',
        image: 'https://storage.googleapis.com/iaml-images-public/programs/employee-relations-law-hero.jpg'
      },
      'Certificate in Strategic HR Leadership': {
        components: ['HR Law Fundamentals', 'Strategic HR Management'],
        slug: 'strategic-hr',
        description: 'Earn your Certificate in Strategic HR Leadership through two virtual sessions. Master HR fundamentals and strategic management to receive your full certificate.',
        image: 'https://storage.googleapis.com/iaml-images-public/programs/strategic-hr-hero.jpg'
      }
    };

    // Virtual program image library - rotate to avoid duplication across instances
    const VIRTUAL_IMAGES = {
      'Certificate in Employee Relations Law': [
        'https://i.imgur.com/sSzeD5U.jpg',
        'https://i.imgur.com/kGiKVzl.jpg',
        'https://i.imgur.com/r81GZTG.jpg'
      ],
      'Certificate in Strategic HR Leadership': [
        'https://i.imgur.com/CY3t9Ye.jpg',
        'https://i.imgur.com/Mb3eS71.jpg',
        'https://i.imgur.com/Vv4iODE.jpg'
      ]
      // Reserved for future use:
      // 'https://i.imgur.com/TDMN3ZX.jpg'
      // 'https://i.imgur.com/3wSERSo.jpg'
    };

    const PROGRAM_SLUG_MAP = {
      'Certificate in Employee Relations Law': 'employee-relations-law',
      'Advanced Certificate in Strategic Employment Law': 'strategic-employment-law',
      'Certificate in Strategic HR Leadership': 'strategic-hr',
      'Certificate in Workplace Investigations': 'workplace-investigations',
      'Certificate in Employee Benefits Law': 'employee-benefits-law',
      'Advanced Certificate in Employee Benefits Law': 'advanced-benefits-law'
    };

    const BLOCK_DAYS_MAP = {
      'Certificate in Employee Relations Law': {
        1: 'Monday - Tuesday',
        2: 'Wednesday - Thursday',
        3: 'Friday'
      },
      'Certificate in Strategic HR Leadership': {
        1: 'Monday - Tuesday',
        2: 'Wednesday - Friday'
      },
      'Certificate in Employee Benefits Law': {
        1: 'Monday - Tuesday',
        2: 'Wednesday',
        3: 'Thursday - Friday'
      }
    };

    // Program type categories - programs can belong to multiple types
    const PROGRAM_TYPE_MAP = {
      'employment-law': [
        'Certificate in Employee Relations Law',
        'Certificate in Strategic HR Leadership',
        'Certificate in Workplace Investigations',
        'Advanced Certificate in Strategic Employment Law'
      ],
      'benefits-law': [
        'Certificate in Employee Benefits Law',
        'Advanced Certificate in Employee Benefits Law'
      ],
      'hr-management': [
        'Certificate in Workplace Investigations',
        'Certificate in Strategic HR Leadership'
      ]
    };

    // Descriptions for non-block programs
    const PROGRAM_DESCRIPTIONS = {
      'Certificate in Workplace Investigations': 'Master the essential skills for conducting thorough, legally defensible workplace investigations. This intensive program covers investigation planning, interviewing techniques, evidence gathering, credibility assessment, and documentation best practices.',
      'Advanced Certificate in Strategic Employment Law': 'Elevate your expertise with advanced strategies for navigating complex employment law challenges. Designed for experienced HR professionals and attorneys seeking to deepen their knowledge of cutting-edge legal issues and emerging trends.',
      'Advanced Certificate in Employee Benefits Law': 'Build on your benefits knowledge with advanced topics including complex compliance issues, plan design strategies, and fiduciary responsibilities. Ideal for professionals ready to tackle sophisticated benefits challenges.'
    };

    // ============================================================================
    // HELPER FUNCTIONS
    // ============================================================================

    // Format date range smartly: same month = "February 2425, 2026", different = "February 24  March 4, 2026"
    function formatSmartDateRange(rawStartDate, rawEndDate) {
      if (!rawStartDate) return '';

      const start = new Date(rawStartDate);
      const end = rawEndDate ? new Date(rawEndDate) : null;

      const months = ['January', 'February', 'March', 'April', 'May', 'June',
                      'July', 'August', 'September', 'October', 'November', 'December'];

      const startMonth = months[start.getMonth()];
      const startDay = start.getDate();
      const startYear = start.getFullYear();

      if (!end || start.getTime() === end.getTime()) {
        // Single day
        return `${startMonth} ${startDay}, ${startYear}`;
      }

      const endMonth = months[end.getMonth()];
      const endDay = end.getDate();
      const endYear = end.getFullYear();

      if (startMonth === endMonth && startYear === endYear) {
        // Same month and year: "February 2425, 2026"
        return `${startMonth} ${startDay}${endDay}, ${startYear}`;
      } else if (startYear === endYear) {
        // Different month, same year: "February 24  March 4, 2026"
        return `${startMonth} ${startDay}  ${endMonth} ${endDay}, ${startYear}`;
      } else {
        // Different year: "December 28, 2025  January 2, 2026"
        return `${startMonth} ${startDay}, ${startYear}  ${endMonth} ${endDay}, ${endYear}`;
      }
    }

    // ============================================================================
    // DATA LOADING - Static Cache with API Fallback
    // ============================================================================
    const SESSION_CACHE_PATH = '/data/sessions/all-sessions.json';

    async function loadProgramsFromAirtable() {
      const listEl = document.getElementById('programList');

      try {
        let data;

        // Try static cache first for faster loading
        try {
          const cacheResponse = await fetch(SESSION_CACHE_PATH);
          if (cacheResponse.ok) {
            data = await cacheResponse.json();
            console.log('Sessions loaded from cache, generated:', data.generated);
          }
        } catch (cacheError) {
          console.warn('Session cache unavailable, falling back to API');
        }

        // Fallback to API if cache failed or unavailable
        if (!data || !data.records) {
          const filterFormula = encodeURIComponent("{Show on Website}=TRUE()");
          const response = await fetch(
            `/api/airtable-programs?table=${TABLE_ID}&filterByFormula=${filterFormula}&sort[0][field]=Start Date&sort[0][direction]=asc`
          );

          if (!response.ok) throw new Error('Failed to load programs');
          data = await response.json();
        }

        const records = data.records || [];

        // Transform all records
        const allTransformed = records.map(transformRecord);

        // Filter regular certificate programs (in-person and virtual non-component)
        allPrograms = allTransformed
          .filter(p => ALLOWED_PROGRAMS.includes(p.title) && p.format !== 'on-demand');

        // Get virtual component sessions for building virtual certificate pairs
        const virtualComponents = allTransformed
          .filter(p => VIRTUAL_COMPONENT_PROGRAMS.includes(p.title) && p.format === 'virtual');

        // Build virtual certificate pairs and add to allPrograms
        const virtualCertificates = buildVirtualCertificatePairs(virtualComponents);
        allPrograms = [...allPrograms, ...virtualCertificates];

        // Sort all programs by start date
        allPrograms.sort((a, b) => {
          if (!a.rawStartDate) return 1;
          if (!b.rawStartDate) return -1;
          return new Date(a.rawStartDate) - new Date(b.rawStartDate);
        });

        populateFilters(allPrograms);
        renderPrograms(allPrograms);

      } catch (error) {
        console.error('Error loading programs:', error);
        listEl.innerHTML = `
          <div class="schedule-v2-empty">
            <p>Unable to load program schedule. Please try again later.</p>
          </div>
        `;
      }
    }

    // Build virtual certificate pairs from component sessions
    function buildVirtualCertificatePairs(virtualComponents) {
      const pairs = [];
      const PAIR_WINDOW_DAYS = 28; // Components must be within 28 days of each other
      const imageIndexes = {}; // Track which image to use next per certificate type

      for (const [certName, def] of Object.entries(VIRTUAL_CERTIFICATE_DEFS)) {
        const [comp1Name, comp2Name] = def.components;

        // Initialize image index for this certificate type
        if (imageIndexes[certName] === undefined) imageIndexes[certName] = 0;

        // Get sessions for each component, sorted by date
        const comp1Sessions = virtualComponents
          .filter(p => p.title === comp1Name)
          .sort((a, b) => new Date(a.rawStartDate) - new Date(b.rawStartDate));

        const comp2Sessions = virtualComponents
          .filter(p => p.title === comp2Name)
          .sort((a, b) => new Date(a.rawStartDate) - new Date(b.rawStartDate));

        // Find valid pairs (comp2 starts within 28 days after comp1)
        for (const s1 of comp1Sessions) {
          const s1Start = new Date(s1.rawStartDate);

          for (const s2 of comp2Sessions) {
            const s2Start = new Date(s2.rawStartDate);
            const daysDiff = (s2Start - s1Start) / (1000 * 60 * 60 * 24);

            // s2 must start after s1 and within the window
            if (daysDiff >= 0 && daysDiff <= PAIR_WINDOW_DAYS) {
              // Get rotating image from VIRTUAL_IMAGES library
              const images = VIRTUAL_IMAGES[certName] || [];
              const imageIndex = imageIndexes[certName] % (images.length || 1);
              const image = images[imageIndex] || def.image || s1.image;
              imageIndexes[certName]++;

              pairs.push({
                id: `virtual-cert-${certName.replace(/\s+/g, '-')}-${s1.rawStartDate}`,
                title: certName,
                slug: def.slug,
                isVirtualCertificate: true,
                format: 'virtual',
                formatDisplay: 'Virtual',
                image: image,
                location: 'Virtual',
                venue: 'Online Live Sessions',
                rawStartDate: s1.rawStartDate,
                rawEndDate: s2.rawEndDate || s2.rawStartDate,
                startDate: s1.startDate,
                endDate: s2.endDate,
                registrationUrl: s1.registrationUrl || '/register',
                description: def.description,
                blocks: [],
                // Store component session info for display
                virtualComponents: [
                  {
                    number: 1,
                    title: comp1Name,
                    dates: formatSmartDateRange(s1.rawStartDate, s1.rawEndDate),
                    rawStart: s1.rawStartDate,
                    rawEnd: s1.rawEndDate
                  },
                  {
                    number: 2,
                    title: comp2Name,
                    dates: formatSmartDateRange(s2.rawStartDate, s2.rawEndDate),
                    rawStart: s2.rawStartDate,
                    rawEnd: s2.rawEndDate
                  }
                ]
              });
            }
          }
        }
      }

      return pairs;
    }

    function transformRecord(record) {
      const f = record.fields;
      const rawProgramName = f['Program Name'];
      const programName = Array.isArray(rawProgramName) ? rawProgramName[0] : (rawProgramName || f['Instance Name'] || 'Untitled Program');

      const blocks = [];
      if (f['Block 1 Title']) {
        blocks.push({
          number: 1,
          title: f['Block 1 Title'],
          dates: f['Block 1 Dates'] || '',
          times: f['Block 1 Times'] || '',
          instructor: f['Full Name with Credentials (from Block 1 Instructor)']?.[0] || f['Block 1 Instructor'] || ''
        });
      }
      if (f['Block 2 Title']) {
        blocks.push({
          number: 2,
          title: f['Block 2 Title'],
          dates: f['Block 2 Dates'] || '',
          times: f['Block 2 Times'] || '',
          instructor: f['Full Name with Credentials (from Block 2 Instructor)']?.[0] || f['Block 2 Instructor'] || ''
        });
      }
      if (f['Block 3 Title']) {
        blocks.push({
          number: 3,
          title: f['Block 3 Title'],
          dates: f['Block 3 Dates'] || '',
          times: f['Block 3 Times'] || '',
          instructor: f['Full Name with Credentials (from Block 3 Instructor)']?.[0] || f['Block 3 Instructor'] || ''
        });
      }

      return {
        id: record.id,
        title: programName,
        slug: PROGRAM_SLUG_MAP[programName] || programName.toLowerCase().replace(/[^a-z0-9]+/g, '-'),
        location: f['City'] ? `${f['City']}, ${f['State/Province'] || ''}`.trim().replace(/,\s*$/, '') : 'Virtual',
        venue: f['Location'] || (f['Format']?.toLowerCase().includes('virtual') ? 'Online Live Sessions' : ''),
        startDate: formatDisplayDate(f['Start Date']),
        endDate: formatDisplayDate(f['End Date']),
        rawStartDate: f['Start Date'],
        rawEndDate: f['End Date'],
        format: normalizeFormat(f['Format']),
        formatDisplay: f['Format'] || 'In-Person',
        image: f['Hero Image URL'] || 'https://images.unsplash.com/photo-1582719508461-905c673771fd?w=800',
        registrationUrl: f['Registration URL'] || '/register',
        enrollmentStatus: f['Enrollment Status'],
        duration: f['Duration (Days)'] || '',
        blocks: blocks
      };
    }

    function formatDisplayDate(dateStr) {
      if (!dateStr) return '';
      const [y, m, d] = dateStr.split('-').map(Number);
      const date = new Date(Date.UTC(y, m - 1, d));
      return date.toLocaleDateString('en-US', {
        month: 'long', day: 'numeric', year: 'numeric', timeZone: 'UTC'
      });
    }

    function normalizeFormat(format) {
      if (!format) return 'in-person';
      const lower = format.toLowerCase();
      if (lower.includes('virtual')) return 'virtual';
      if (lower.includes('demand')) return 'on-demand';
      return 'in-person';
    }

    function formatDateRange(rawStart, rawEnd) {
      if (!rawStart || !rawEnd) return '';
      const [sy, sm, sd] = rawStart.split('-').map(Number);
      const [ey, em, ed] = rawEnd.split('-').map(Number);
      const startMonth = new Date(Date.UTC(sy, sm - 1, sd)).toLocaleDateString('en-US', { month: 'long', timeZone: 'UTC' });
      const endMonth = new Date(Date.UTC(ey, em - 1, ed)).toLocaleDateString('en-US', { month: 'long', timeZone: 'UTC' });
      if (sy === ey && sm === em) {
        return `${startMonth} ${sd} - ${ed}, ${sy}`;
      }
      return `${startMonth} ${sd}, ${sy} - ${endMonth} ${ed}, ${ey}`;
    }

    // ============================================================================
    // FILTERS
    // ============================================================================
    function populateFilters(programs) {
      const titles = [...new Set(programs.map(p => p.title))].sort();
      const programSelect = document.getElementById('programFilter');
      programSelect.innerHTML = '<option value="">All Programs</option>';
      titles.forEach(t => {
        programSelect.innerHTML += `<option value="${t}">${t}</option>`;
      });
    }

    function filterPrograms() {
      const programType = document.getElementById('programTypeFilter').value;
      const format = document.getElementById('formatFilter').value;
      const program = document.getElementById('programFilter').value;

      const filtered = allPrograms.filter(p => {
        // Filter by program type (check if program is in the selected type's array)
        if (programType && PROGRAM_TYPE_MAP[programType]) {
          if (!PROGRAM_TYPE_MAP[programType].includes(p.title)) return false;
        }
        // Filter by format
        if (format && p.format !== format) return false;
        // Filter by specific program
        if (program && p.title !== program) return false;
        return true;
      });

      renderPrograms(filtered);
    }

    // ============================================================================
    // RENDER - VERSION B (Card-Row Hybrid)
    // ============================================================================
    function renderPrograms(programs) {
      const listEl = document.getElementById('programList');

      if (programs.length === 0) {
        listEl.innerHTML = '<div class="schedule-v2-empty"><p>No programs match your filters.</p></div>';
        return;
      }

      listEl.innerHTML = programs.map(program => {
        const programDays = BLOCK_DAYS_MAP[program.title] || {};
        const programDescription = PROGRAM_DESCRIPTIONS[program.title] || '';

        // Handle virtual certificate pairs differently
        let contentHtml;
        if (program.isVirtualCertificate && program.virtualComponents) {
          // Virtual certificate with component sessions
          contentHtml = `
            <table class="schedule-v2c-blocks-table" aria-label="Virtual sessions for ${program.title}">
              <thead>
                <tr>
                  <th>Session</th>
                  <th>Topic</th>
                  <th>Dates</th>
                </tr>
              </thead>
              <tbody>
                ${program.virtualComponents.map(comp => `
                  <tr>
                    <td data-label="Session"><span class="schedule-v2c-block-num">${comp.number}</span></td>
                    <td data-label="Topic">${comp.title}</td>
                    <td data-label="Dates">${comp.dates}</td>
                  </tr>
                `).join('')}
              </tbody>
            </table>
            <p class="schedule-v2b-blocks-footnote">*Complete both sessions to earn your certificate</p>
          `;
        } else if (program.blocks.length > 0) {
          // Regular program with blocks
          contentHtml = `
            <table class="schedule-v2c-blocks-table" aria-label="Program blocks for ${program.title}">
              <thead>
                <tr>
                  <th>Block</th>
                  <th>Topic</th>
                  <th>Days</th>
                </tr>
              </thead>
              <tbody>
                ${program.blocks.map(block => {
                  const blockDays = programDays[block.number] || '';
                  return `
                    <tr>
                      <td data-label="Block"><span class="schedule-v2c-block-num">${block.number}</span></td>
                      <td data-label="Topic">${block.title}</td>
                      <td data-label="Days">${blockDays}</td>
                    </tr>
                  `;
                }).join('')}
              </tbody>
            </table>
            <p class="schedule-v2b-blocks-footnote">*Individual blocks available for separate registration</p>
          `;
        } else {
          // Non-block program with description
          const desc = program.description || programDescription || 'Program details available upon registration.';
          contentHtml = `<p class="schedule-v2b-program-description">${desc}</p>`;
        }

        return `
          <article class="schedule-v2b-card-row">
            <div class="schedule-v2b-image-col">
              <img src="${program.image}" alt="${program.title}" class="schedule-v2b-hero-image" loading="lazy">
              <div class="schedule-v2b-image-overlay">
                <span class="schedule-v2b-format-badge ${program.format}">${program.formatDisplay}</span>
              </div>
            </div>
            <div class="schedule-v2b-info-col">
              <header class="schedule-v2b-header">
                <h3 class="schedule-v2b-program-title">${program.title}</h3>
                <div class="schedule-v2b-dates-location">
                  <time datetime="${program.rawStartDate}">${formatDateRange(program.rawStartDate, program.rawEndDate)}</time>
                  <span class="schedule-v2b-location-venue">
                    <strong>${program.location}</strong>${program.venue ? ` - ${program.venue}` : ''}
                  </span>
                </div>
              </header>
              <div class="schedule-v2b-blocks-grid">
                ${contentHtml}
              </div>
            </div>
            <div class="schedule-v2b-action-col">
              <button class="schedule-v2b-learn-btn" onclick="openProgramModal('${program.id}')">
                Learn More
              </button>
            </div>
          </article>
        `;
      }).join('');
    }

    // ============================================================================
    // MODAL
    // ============================================================================
    function openProgramModal(programId) {
      const program = allPrograms.find(p => p.id === programId);
      if (!program) return;

      document.getElementById('programModal-image').style.backgroundImage = `url('${program.image}')`;
      document.getElementById('programModal-title').textContent = program.title;
      document.getElementById('programModal-dates').textContent = formatDateRange(program.rawStartDate, program.rawEndDate);
      document.getElementById('programModal-duration').textContent = program.duration ? `${program.duration} days` : 'Contact for details';
      document.getElementById('programModal-location').textContent = program.venue ? `${program.location}  ${program.venue}` : program.location;

      const formatBadge = document.getElementById('programModal-format');
      formatBadge.textContent = program.formatDisplay;
      formatBadge.className = `programModal-format-badge ${program.format}`;

      const blocksContainer = document.getElementById('programModal-blocks');
      if (program.blocks && program.blocks.length > 0) {
        const programDays = BLOCK_DAYS_MAP[program.title] || {};
        blocksContainer.innerHTML = `
          <h3 class="programModal-blocks-title">Program Schedule</h3>
          ${program.blocks.map(block => {
            const blockDays = programDays[block.number] || '';
            return `
            <div class="programModal-block">
              <div class="programModal-block-header">
                <span class="programModal-block-number">Block ${block.number}</span>
                <span class="programModal-block-title">${block.title}</span>
              </div>
              <div class="programModal-block-details">
                ${blockDays ? `<div class="programModal-block-days">${blockDays}</div>` : ''}
                ${block.instructor ? `<div class="programModal-block-instructor">${block.instructor}</div>` : ''}
              </div>
            </div>
          `}).join('')}
        `;
        blocksContainer.style.display = 'block';
      } else {
        blocksContainer.innerHTML = '';
        blocksContainer.style.display = 'none';
      }

      document.getElementById('programModal-register').href = program.registrationUrl;
      document.getElementById('programModal-details').href = `/programs/${program.slug}?format=${program.format}`;

      document.getElementById('programModal').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeProgramModal(event) {
      if (event && event.target !== event.currentTarget) return;
      document.getElementById('programModal').classList.remove('active');
      document.body.style.overflow = 'auto';
    }

    // ============================================================================
    // EVENT LISTENERS
    // ============================================================================
    document.getElementById('programTypeFilter').addEventListener('change', filterPrograms);
    document.getElementById('formatFilter').addEventListener('change', filterPrograms);
    document.getElementById('programFilter').addEventListener('change', filterPrograms);
    document.getElementById('clearFilters').addEventListener('click', () => {
      document.getElementById('programTypeFilter').value = '';
      document.getElementById('formatFilter').value = '';
      document.getElementById('programFilter').value = '';
      renderPrograms(allPrograms);
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        const modal = document.getElementById('programModal');
        if (modal.classList.contains('active')) {
          closeProgramModal();
        }
      }
    });

    document.addEventListener('DOMContentLoaded', loadProgramsFromAirtable);
  </script>

</body>
</html>
